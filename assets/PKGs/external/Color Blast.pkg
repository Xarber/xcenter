{"type":"Game","title":"Color Blast","desc":"Space Invaders is now on X-Center!","author":"Nate Wiley","src":"/assets/media/apps/external/colorblast.png","id":"Color BlastHHVF24L3GN","batch":"","content":"<div class=\"container\">\n\t<div class=\"game-wrap\">\n\t\t<canvas width=\"960px\" height=\"540\" id=\"game\"></canvas>\n\t\t<article class=\"content\">\n\t\t\t<h1 class=\"title\"><span>C</span><span>o</span><span>l</span><span>o</span><span>r</span><span> </span><span>B</span><span>l</span><span>a</span><span>s</span><span>t</span></h1>\n\n\t\t\t<p>Use the <code>Left</code> and <code>Right</code> Arrows or <code>A</code> and <code>D</code> keys to move, <code>Spacebar</code> to shoot.</p>\n\n\t\t\t<p><a href=\"https://codepen.io/natewiley/full/EGyiF\" target=\"_blank\">Click here to play in full mode</a>, click the game to pause and take a break. <a href=\"https://codepen.io/natewiley\" target=\"_blank\">Follow me on CodePen</a></p>\n\t\t</article>\n\t</div>\n</div><script type=\"text/javascript\">\n// Color Blast!\n// License MIT\n// Â© 2014 Nate Wiley\n\n(function(window){\n\nvar Game = {\n\n\tinit: function(){\n\t\tthis.c = document.getElementById(\"game\");\n\t\tthis.c.width = this.c.width;\n\t\tthis.c.height = this.c.height;\n\t\tthis.ctx = this.c.getContext(\"2d\");\n\t\tthis.color = \"rgba(20,20,20,.7)\";\n\t\tthis.bullets = [];\n\t\tthis.enemyBullets = [];\n\t\tthis.enemies = [];\n\t\tthis.particles = [];\n\t\tthis.bulletIndex = 0;\n\t\tthis.enemyBulletIndex = 0;\n\t\tthis.enemyIndex = 0;\n\t\tthis.particleIndex = 0;\n\t\tthis.maxParticles = 10;\n\t\tthis.maxEnemies = 6;\n\t\tthis.enemiesAlive = 0;\n\t\tthis.currentFrame = 0;\n\t\tthis.maxLives = 3;\n\t\tthis.life = 0;\n\t\tthis.binding();\n\t\tthis.player = new Player();\n\t\tthis.score = 0;\n\t\tthis.paused = false;\n\t\tthis.shooting = false;\n\t\tthis.oneShot = false;\n\t\tthis.isGameOver = false;\n     this.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n\t\tfor(var i = 0; i<this.maxEnemies; i++){\n\t\t\tnew Enemy();\n\t\t\tthis.enemiesAlive++;\n\t\t}\n\t\tthis.invincibleMode(2000);\n\n\t\tthis.loop();\n\t},\n\n\tbinding: function(){\n\t\twindow.addEventListener(\"keydown\", this.buttonDown);\n\t\twindow.addEventListener(\"keyup\", this.buttonUp);\n\t\twindow.addEventListener(\"keypress\", this.keyPressed);\n\t\tthis.c.addEventListener(\"click\", this.clicked);\n\t},\n\n\tclicked: function(){\n\t\tif(!Game.paused) {\n\t\t\tGame.pause();\n\t\t} else {\n\t\t\tif(Game.isGameOver){\n\t\t\t\tGame.init();\n\t\t\t} else {\n\t\t\t\tGame.unPause();\n\t\t\t\tGame.loop();\n\t\t\t\tGame.invincibleMode(1000);\n\t\t\t}\n\t\t}\n\t},\n\n\tkeyPressed: function(e){\n\t\tif(e.keyCode === 32){\n\t\t\tif(!Game.player.invincible  && !Game.oneShot){\n\t\t\t\tGame.player.shoot();\n\t\t\t\tGame.oneShot = true;\n\t\t\t}\n\t\t\tif(Game.isGameOver){\n\t\t\t\tGame.init();\n\t\t\t}\n      e.preventDefault();\n\t\t}\n\t},\n\n\tbuttonUp: function(e){\n\t\tif(e.keyCode === 32){\n\t\t\tGame.shooting = false;\n\t\t\tGame.oneShot = false;\n        e.preventDefault();\n\t\t}\n\t\tif(e.keyCode === 37 || e.keyCode === 65){\n\t\t\tGame.player.movingLeft = false;\n\t\t}\n\t\tif(e.keyCode === 39 || e.keyCode === 68){\n\t\t\tGame.player.movingRight = false;\n\t\t}\n\t},\n\n\tbuttonDown: function(e){\n\t\tif(e.keyCode === 32){\n\t\t\tGame.shooting = true;\n\t\t}\n\t\tif(e.keyCode === 37 || e.keyCode === 65){\n\t\t\tGame.player.movingLeft = true;\n\t\t}\n\t\tif(e.keyCode === 39 || e.keyCode === 68){\n\t\t\tGame.player.movingRight = true;\n\t\t}\n\t},\n\n\trandom: function(min, max){\n    return Math.floor(Math.random() * (max - min) + min);\n  },\n\n  invincibleMode: function(s){\n  \tthis.player.invincible = true;\n  \tsetTimeout(function(){\n  \t\tGame.player.invincible = false;\n  \t}, s);\n  },\n\n  collision: function(a, b){\n\t\treturn !(\n\t    ((a.y + a.height) < (b.y)) ||\n\t    (a.y > (b.y + b.height)) ||\n\t    ((a.x + a.width) < b.x) ||\n\t    (a.x > (b.x + b.width))\n\t\t)\n\t},\n\n  clear: function(){\n  \tthis.ctx.fillStyle = Game.color;\n  \tthis.ctx.fillRect(0, 0, this.c.width, this.c.height);\n  },\n   \n  pause: function(){\n\t\tthis.paused = true;\n  },\n\n  unPause: function(){\n\t\tthis.paused = false;\n  },\n\n\n  gameOver: function(){\n  \tthis.isGameOver = true;\n  \tthis.clear();\n  \tvar message = \"Game Over\";\n  \tvar message2 = \"Score: \" + Game.score;\n  \tvar message3 = \"Click or press Spacebar to Play Again\";\n  \tthis.pause();\n  \tthis.ctx.fillStyle = \"white\";\n\t  this.ctx.font = \"bold 30px Lato, sans-serif\";\n\t  this.ctx.fillText(message, this.c.width/2 - this.ctx.measureText(message).width/2, this.c.height/2 - 50);\n\t  this.ctx.fillText(message2, this.c.width/2 - this.ctx.measureText(message2).width/2, this.c.height/2 - 5);\n\t  this.ctx.font = \"bold 16px Lato, sans-serif\";\n\t  this.ctx.fillText(message3, this.c.width/2 - this.ctx.measureText(message3).width/2, this.c.height/2 + 30);\n  },\n\n  updateScore: function(){\n  \tthis.ctx.fillStyle = \"white\";\n  \tthis.ctx.font = \"16px Lato, sans-serif\";\n  \tthis.ctx.fillText(\"Score: \" + this.score, 8, 20);\n  \tthis.ctx.fillText(\"Lives: \" + (this.maxLives - this.life), 8, 40);\n  },\n  \n\tloop: function(){\n\t\tif(!Game.paused){\n\t\t\tGame.clear();\n\t\t\tfor(var i in Game.enemies){\n\t\t\t\tvar currentEnemy = Game.enemies[i];\n\t\t\t\tcurrentEnemy.draw();\n\t\t\t\tcurrentEnemy.update();\n\t\t\t\tif(Game.currentFrame % currentEnemy.shootingSpeed === 0){\n\t\t\t\t\tcurrentEnemy.shoot();\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(var x in Game.enemyBullets){\n\t\t\t\tGame.enemyBullets[x].draw();\n\t\t\t\tGame.enemyBullets[x].update();\n\t\t\t}\n\t\t\tfor(var z in Game.bullets){\n\t\t\t\tGame.bullets[z].draw();\n\t\t\t\tGame.bullets[z].update();\n\t\t\t}\n\t\t\tif(Game.player.invincible){\n\t\t\t\tif(Game.currentFrame % 20 === 0){\n\t\t\t\t\tGame.player.draw();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tGame.player.draw();\n\t\t\t}\n\n\t    for(var i in Game.particles){\n\t      Game.particles[i].draw();\n\t    }\n\t\t\tGame.player.update();\n\t\t\tGame.updateScore();\n\t\t\tGame.currentFrame = Game.requestAnimationFrame.call(window, Game.loop);\n\t\t}\n\t}\n\n};\n\n\n\n\n\n\nvar Player = function(){\n\tthis.width = 60;\n\tthis.height = 20;\n\tthis.x = Game.c.width/2 - this.width/2;\n\tthis.y = Game.c.height - this.height;\n\tthis.movingLeft = false;\n\tthis.movingRight = false;\n\tthis.speed = 8;\n\tthis.invincible = false;\n\tthis.color = \"white\";\n};\n\n\nPlayer.prototype.die = function(){\n\tif(Game.life < Game.maxLives){\n\t\tGame.invincibleMode(2000);  \n \t\tGame.life++;\n\t} else {\n\t\tGame.pause();\n\t\tGame.gameOver();\n\t}\n};\n\n\nPlayer.prototype.draw = function(){\n\tGame.ctx.fillStyle = this.color;\n\tGame.ctx.fillRect(this.x, this.y, this.width, this.height);\n};\n\n\nPlayer.prototype.update = function(){\n\tif(this.movingLeft && this.x > 0){\n\t\tthis.x -= this.speed;\n\t}\n\tif(this.movingRight && this.x + this.width < Game.c.width){\n\t\tthis.x += this.speed;\n\t}\n\tif(Game.shooting && Game.currentFrame % 10 === 0){\n\t\tthis.shoot();\n\t}\n\tfor(var i in Game.enemyBullets){\n\t\tvar currentBullet = Game.enemyBullets[i];\n\t\tif(Game.collision(currentBullet, this) && !Game.player.invincible){\n\t\t\tthis.die();\n\t\t\tdelete Game.enemyBullets[i];\n\t\t}\n\t}\n};\n\n\nPlayer.prototype.shoot = function(){\n\tGame.bullets[Game.bulletIndex] = new Bullet(this.x + this.width/2);\n\tGame.bulletIndex++;\n};\n\n\n\n\n\n\nvar Bullet = function(x){  \n\tthis.width = 8;\n\tthis.height = 20;\n\tthis.x = x;\n\tthis.y = Game.c.height - 10;\n\tthis.vy = 8;\n\tthis.index = Game.bulletIndex;\n\tthis.active = true;\n\tthis.color = \"white\";\n\t\n};\n\n\nBullet.prototype.draw = function(){\n\tGame.ctx.fillStyle = this.color;\n\tGame.ctx.fillRect(this.x, this.y, this.width, this.height);\n};\n\n\nBullet.prototype.update = function(){\n\tthis.y -= this.vy;\n\tif(this.y < 0){\n\t\tdelete Game.bullets[this.index];\n\t}\n};\n\n\n\n\n\n\nvar Enemy = function(){\n\tthis.width = 60;\n\tthis.height = 20;\n\tthis.x = Game.random(0, (Game.c.width - this.width));\n\tthis.y = Game.random(10, 40);\n\tthis.vy = Game.random(1, 3) * .1;\n\tthis.index = Game.enemyIndex;\n\tGame.enemies[Game.enemyIndex] = this;\n\tGame.enemyIndex++;\n\tthis.speed = Game.random(2, 3);\n\tthis.shootingSpeed = Game.random(30, 80);\n\tthis.movingLeft = Math.random() < 0.5 ? true : false;\n\tthis.color = \"hsl(\"+ Game.random(0, 360) +\", 60%, 50%)\";\n\t\n};\n\n\nEnemy.prototype.draw = function(){\n\tGame.ctx.fillStyle = this.color;\n\tGame.ctx.fillRect(this.x, this.y, this.width, this.height);\n};\n\n\nEnemy.prototype.update = function(){\n\tif(this.movingLeft){\n\t\tif(this.x > 0){\n\t\t\tthis.x -= this.speed;\n\t\t\tthis.y += this.vy;\n\t\t} else {\n\t\t\tthis.movingLeft = false;\n\t\t}\n\t} else {\n\t\tif(this.x + this.width < Game.c.width){\n\t\t\tthis.x += this.speed;\n\t\t\tthis.y += this.vy;\n\t\t} else {\n\t\t\tthis.movingLeft = true;\n\t\t}\n\t}\n\t\n\tfor(var i in Game.bullets){\n\t\tvar currentBullet = Game.bullets[i];\n\t\tif(Game.collision(currentBullet, this)){\n\t\t\tthis.die();\n\t\t\tdelete Game.bullets[i];\n\t\t}\n\t} \n};\n\nEnemy.prototype.die = function(){\n  this.explode();\n  delete Game.enemies[this.index];\n  Game.score += 15;\n  Game.enemiesAlive = Game.enemiesAlive > 1 ? Game.enemiesAlive - 1 : 0;\n  if(Game.enemiesAlive < Game.maxEnemies){\n  \tGame.enemiesAlive++;\n  \tsetTimeout(function(){\n  \t\tnew Enemy();\n\t  }, 2000);\n\t}\n  \n};\n\nEnemy.prototype.explode = function(){\n\tfor(var i=0; i<Game.maxParticles; i++){\n    new Particle(this.x + this.width/2, this.y, this.color);\n  }\n};\n\nEnemy.prototype.shoot = function(){\n\tnew EnemyBullet(this.x + this.width/2, this.y, this.color);\n};\n\nvar EnemyBullet = function(x, y, color){\n\tthis.width = 8;\n\tthis.height = 20;\n\tthis.x = x;\n\tthis.y = y;\n\tthis.vy = 6;\n\tthis.color = color;\n\tthis.index = Game.enemyBulletIndex;\n\tGame.enemyBullets[Game.enemyBulletIndex] = this;\n\tGame.enemyBulletIndex++;\n};\n\nEnemyBullet.prototype.draw = function(){\n\tGame.ctx.fillStyle = this.color;\n\tGame.ctx.fillRect(this.x, this.y, this.width, this.height);\n};\n\nEnemyBullet.prototype.update = function(){\n\tthis.y += this.vy;\n\tif(this.y > Game.c.height){\n\t\tdelete Game.enemyBullets[this.index];\n\t}\n};\n\n\n\n\nvar Particle = function(x, y, color){\n    this.x = x;\n    this.y = y;\n    this.vx = Game.random(-5, 5);\n    this.vy = Game.random(-5, 5);\n    this.color = color || \"orange\";\n    Game.particles[Game.particleIndex] = this;\n    this.id = Game.particleIndex;\n    Game.particleIndex++;\n    this.life = 0;\n    this.gravity = .05;\n    this.size = 40;\n    this.maxlife = 100;\n  }\n\n  Particle.prototype.draw = function(){\n    this.x += this.vx;\n    this.y += this.vy;\n    this.vy += this.gravity;\n    this.size *= .89;\n    Game.ctx.fillStyle = this.color;\n    Game.ctx.fillRect(this.x, this.y, this.size, this.size);\n    this.life++;\n    if(this.life >= this.maxlife){\n      delete Game.particles[this.id];\n    }\n  };\n\nGame.init();\n\n\n}(window));\n</script><style>@import url(https://fonts.googleapis.com/css?family=Lato:100,300,400,700);\n* {\n  margin: 0;\n  padding: 0;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\nhtml, body {\n  height: 100%;\n}\nbody {\n  min-height: 100%;\n  max-width: 100%;\n  background: #111;\n  font-family: Lato, sans-serif;\n}\n.container {\n  min-height: 100%;\n  max-width: 960px;\n  margin: 0 auto;\n}\n.game-wrap {\n  position: relative;\n  padding: 20px 0 0;\n}\ncanvas {\n  position: relative;\n  max-width: 100%;\n  border: 2px solid black;\n  max-height: 100%;\n  display: block;\n  margin: 0 auto;\n}\n.content {\n  color: #ccc;\n  text-align: center;\n  padding: 0 20px;\n}\np {\n  margin: 10px 0;\n  font-size: 18px;\n  line-height: 1.5em;\n}\ncode {\n  background: #222;\n  background: linear-gradient(#222, #000);\n  line-height: 1.3em;\n  display: inline-block;\n  border-radius: 3px;\n  font-family: monospace;\n  padding: 1px 5px;\n  margin: 0 2px;\n}\na {\n  color: skyblue;\n  text-decoration: none;\n  transition: .2s;\n  &:hover {\n    color: lighten(skyblue, 10%);\n    text-decoration: underline;\n  }\n}\n.title {\n  font-size: 40px;\n  font-weight: 900;\n  margin: 20px 0;\n  @for $i from 1 through 11 {\n    span:nth-child(#{$i}){\n      color: hsl($i * 30, 50%, 50%);\n    }\n  }\n}</style>"}